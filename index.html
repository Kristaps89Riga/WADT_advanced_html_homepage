<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Romeo and Juliet - Act I</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body.dark-mode {
      background-color: #121212;
      color: #e4e4e4;
    }
    .highlight {
      background-color: yellow;
      font-weight: bold;
    }
    .dialogue-line {
      display: none;
      opacity: 0;
      transition: opacity 0.5s ease-in;
    }
    .dialogue-line.visible {
      display: block;
      opacity: 1;
    }
	#progress-container {
	  position: fixed;
	  top: 0;
	  left: 0;
	  width: 100%;
	  height: 6px;
	  background: rgba(0, 0, 0, 0.1);
	  z-index: 9999;
	}
	#progress-bar {
	  height: 100%;
	  width: 0%;
	  background: linear-gradient(to right, #007bff, #00ff88);
	  transition: width 0.2s ease-out;
	}
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Romeo & Juliet</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
          <li class="nav-item"><a class="nav-link" href="#prologue">Prologue</a></li>
          <li class="nav-item"><a class="nav-link" href="#scene1">Scene I</a></li>
        </ul>
        <form class="d-flex me-2">
          <input id="searchInput" class="form-control me-2" type="search" placeholder="Search text...">
        </form>
        <select id="characterFilter" class="form-select me-2">
          <option value="all">All Characters</option>
        </select>
        <button id="darkModeBtn" class="btn btn-outline-light me-2"><i class="bi bi-moon"></i></button>
        <button id="randomQuoteBtn" class="btn btn-outline-warning"><i class="bi bi-shuffle"></i> Quote</button>
      </div>
    </div>
  </nav>
  
  <!-- Audio -->
  <audio id="bgMusic" loop autoplay>
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_7b10f93a78.mp3?filename=medieval-fantasy-113447.mp3" type="audio/mpeg">
  </audio>
  
  <div class="container mt-4">
	<div class="progress fixed-top" style="height: 6px;">
	  <div id="progress-bar" class="progress-bar" role="progressbar"
		   aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"
		   style="width:0%">
	  </div>
	</div>
    <h1 class="text-center mb-4">Romeo and Juliet</h1>
    <h2 id="prologue">ACT I - PROLOGUE</h2>
    <div class="card mb-4">
      <div class="card-body">
        <p>Two households, both alike in dignity,<br>
          In fair Verona, where we lay our scene,<br>
          From ancient grudge break to new mutiny,<br>
          Where civil blood makes civil hands unclean.<br>
          From forth the fatal loins of these two foes<br>
          A pair of star-cross'd lovers take their life;<br>
          Whose misadventured piteous overthrows<br>
          Do with their death bury their parents' strife.<br>
          The fearful passage of their death-mark'd love,<br>
          And the continuance of their parents' rage,<br>
          Which, but their children's end, nought could remove,<br>
          Is now the two hours' traffic of our stage;<n          The which if you with patient ears attend,<br>
          What here shall miss, our toil shall strive to mend.<br>
        </p>
      </div>
    </div>

    <h2 id="scene1">SCENE I. Verona. A public place.</h2>
    <p class="text-muted">Enter SAMPSON and GREGORY, of the house of Capulet, armed with swords and bucklers</p>

    <div id="dialogues">
      <div class="card mb-3" data-character="SAMPSON">
        <div class="card-header fw-bold">SAMPSON <span class="badge bg-danger">Capulet</span></div>
        <div class="card-body">
          <p class="dialogue-line">Gregory, o' my word, we'll not carry coals.</p>
          <p class="dialogue-line">I mean, an we be in choler, we'll draw.</p>
          <p class="dialogue-line">I strike quickly, being moved.</p>
          <p class="dialogue-line">A dog of the house of Montague moves me.</p>
          <p class="dialogue-line">A dog of that house shall move me to stand...</p>
          <p class="dialogue-line">True; and therefore women, being the weaker vessels...</p>
          <p class="dialogue-line">'Tis all one, I will show myself a tyrant...</p>
          <p class="dialogue-line">Ay, the heads of the maids, or their maidenheads...</p>
          <p class="dialogue-line">Me they shall feel while I am able to stand...</p>
          <p class="dialogue-line">My naked weapon is out: quarrel, I will back thee.</p>
          <p class="dialogue-line">Fear me not.</p>
          <p class="dialogue-line">Nay, as they dare. I will bite my thumb at them...</p>
          <p class="dialogue-line">I do bite my thumb, sir.</p>
          <p class="dialogue-line">[Aside to GREGORY] Is the law of our side, if I say ay?</p>
          <p class="dialogue-line">No, sir, I do not bite my thumb at you...</p>
          <p class="dialogue-line">If you do, sir, I am for you: I serve as good a man as you.</p>
          <p class="dialogue-line">Well, sir.</p>
          <p class="dialogue-line">Yes, better, sir.</p>
          <p class="dialogue-line">Draw, if you be men. Gregory, remember thy swashing blow.</p>
        </div>
      </div>

      <div class="card mb-3" data-character="GREGORY">
        <div class="card-header fw-bold">GREGORY <span class="badge bg-danger">Capulet</span></div>
        <div class="card-body">
          <p class="dialogue-line">No, for then we should be colliers.</p>
          <p class="dialogue-line">Ay, while you live, draw your neck out o' the collar.</p>
          <p class="dialogue-line">But thou art not quickly moved to strike.</p>
          <p class="dialogue-line">To move is to stir; and to be valiant is to stand...</p>
          <p class="dialogue-line">That shows thee a weak slave...</p>
          <p class="dialogue-line">The quarrel is between our masters and us their men.</p>
          <p class="dialogue-line">The heads of the maids?</p>
          <p class="dialogue-line">They must take it in sense that feel it.</p>
          <p class="dialogue-line">'Tis well thou art not fish...</p>
          <p class="dialogue-line">How! turn thy back and run?</p>
          <p class="dialogue-line">No, marry; I fear thee!</p>
          <p class="dialogue-line">I will frown as I pass by...</p>
          <p class="dialogue-line">No.</p>
          <p class="dialogue-line">Do you quarrel, sir?</p>
          <p class="dialogue-line">Say 'better:' here comes one of my master's kinsmen.</p>
        </div>
      </div>

      <div class="card mb-3" data-character="ABRAHAM">
        <div class="card-header fw-bold">ABRAHAM <span class="badge bg-primary">Montague</span></div>
        <div class="card-body">
          <p class="dialogue-line">Do you bite your thumb at us, sir?</p>
          <p class="dialogue-line">Do you bite your thumb at us, sir?</p>
          <p class="dialogue-line">Quarrel sir! no, sir.</p>
          <p class="dialogue-line">No better.</p>
          <p class="dialogue-line">You lie.</p>
        </div>
      </div>

      <div class="card mb-3" data-character="BENVOLIO">
        <div class="card-header fw-bold">BENVOLIO <span class="badge bg-primary">Montague</span></div>
        <div class="card-body">
          <p class="dialogue-line">Part, fools! Put up your swords...</p>
          <p class="dialogue-line">I do but keep the peace...</p>
          <p class="dialogue-line">Here were the servants of your adversary...</p>
        </div>
      </div>

      <div class="card mb-3" data-character="TYBALT">
        <div class="card-header fw-bold">TYBALT <span class="badge bg-danger">Capulet</span></div>
        <div class="card-body">
          <p class="dialogue-line">What, art thou drawn among these heartless hinds?...</p>
          <p class="dialogue-line">What, drawn, and talk of peace! I hate the word...</p>
        </div>
      </div>

      <div class="card mb-3" data-character="CAPULET">
        <div class="card-header fw-bold">CAPULET <span class="badge bg-danger">Capulet</span></div>
        <div class="card-body">
          <p class="dialogue-line">What noise is this? Give me my long sword, ho!</p>
          <p class="dialogue-line">My sword, I say! Old Montague is come...</p>
        </div>
      </div>

      <div class="card mb-3" data-character="LADY CAPULET">
        <div class="card-header fw-bold">LADY CAPULET <span class="badge bg-danger">Capulet</span></div>
        <div class="card-body">
          <p class="dialogue-line">A crutch, a crutch! why call you for a sword?</p>
        </div>
      </div>

      <div class="card mb-3" data-character="MONTAGUE">
        <div class="card-header fw-bold">MONTAGUE <span class="badge bg-primary">Montague</span></div>
        <div class="card-body">
          <p class="dialogue-line">Thou villain Capulet,--Hold me not, let me go.</p>
          <p class="dialogue-line">Who set this ancient quarrel new abroach?...</p>
        </div>
      </div>

      <div class="card mb-3" data-character="LADY MONTAGUE">
        <div class="card-header fw-bold">LADY MONTAGUE <span class="badge bg-primary">Montague</span></div>
        <div class="card-body">
          <p class="dialogue-line">Thou shalt not stir a foot to seek a foe.</p>
          <p class="dialogue-line">O, where is Romeo? saw you him to-day?...</p>
        </div>
      </div>

      <div class="card mb-3" data-character="PRINCE">
        <div class="card-header fw-bold">PRINCE <span class="badge bg-secondary">Neutral</span></div>
        <div class="card-body">
          <p class="dialogue-line">Rebellious subjects, enemies to peace...</p>
          <p class="dialogue-line">Three civil brawls, bred of an airy word...</p>
          <p class="dialogue-line">If ever you disturb our streets again...</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const searchInput = document.getElementById('searchInput');
    const characterFilter = document.getElementById('characterFilter');
    const darkModeBtn = document.getElementById('darkModeBtn');
    const randomQuoteBtn = document.getElementById('randomQuoteBtn');
    const dialogueLines = document.querySelectorAll('.dialogue-line');
    const bgMusic = document.getElementById('bgMusic');
	
	document.addEventListener("DOMContentLoaded", () => {
  const lines = document.querySelectorAll(".scene-1 p"); 
  const progressBar = document.getElementById("progress-bar");

  let total = lines.length;
  let seen = new Set();

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        seen.add(entry.target);
      }
    });

    let percent = (seen.size / total) * 100;
    progressBar.style.width = percent + "%";
  }, {
    threshold: 0.5  // vismaz puse rindas redzama
  });

  lines.forEach(line => observer.observe(line));
});

    // Populate character filter
    const characters = [...new Set([...document.querySelectorAll('[data-character]')].map(el => el.dataset.character))];
    characters.forEach(ch => {
      const opt = document.createElement('option');
      opt.value = ch;
      opt.textContent = ch;
      characterFilter.appendChild(opt);
    });

    // Search functionality
    searchInput.addEventListener('input', () => {
      const term = searchInput.value.toLowerCase();
      dialogueLines.forEach(line => {
        line.classList.remove('highlight');
        if (term && line.textContent.toLowerCase().includes(term)) {
          line.classList.add('highlight');
        }
      });
    });

    // Character filter
    characterFilter.addEventListener('change', () => {
      const selected = characterFilter.value;
      document.querySelectorAll('[data-character]').forEach(card => {
        card.style.display = (selected === 'all' || card.dataset.character === selected) ? '' : 'none';
      });
      localStorage.setItem('favoriteCharacter', selected);
    });

    // Dark mode toggle
    function applyDarkMode(state) {
      document.body.classList.toggle('dark-mode', state);
      localStorage.setItem('darkMode', state);
    }
    darkModeBtn.addEventListener('click', () => {
      applyDarkMode(!document.body.classList.contains('dark-mode'));
    });
    if (localStorage.getItem('darkMode') === 'true') applyDarkMode(true);

    // Restore favorite character filter
    const savedChar = localStorage.getItem('favoriteCharacter');
    if (savedChar) {
      characterFilter.value = savedChar;
      characterFilter.dispatchEvent(new Event('change'));
    }

    // Random quote
    randomQuoteBtn.addEventListener('click', () => {
      const lines = Array.from(dialogueLines).map(l => l.textContent.trim()).filter(t => t);
      const randomLine = lines[Math.floor(Math.random() * lines.length)];
      alert(randomLine);
    });

    // Sequential line animation
    let index = 0;
    function showNextLine() {
      if (index < dialogueLines.length) {
        dialogueLines[index].classList.add('visible');
        index++;
        setTimeout(showNextLine, 500);
      }
    }
    showNextLine();
  </script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const lines = document.querySelectorAll("#dialogues .dialogue-line");
  const progressBar = document.getElementById("progress-bar");

  let total = lines.length;
  let seen = new Set();

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        seen.add(entry.target);
      }
    });

    let percent = (seen.size / total) * 100;
    progressBar.style.width = percent + "%";
    progressBar.setAttribute("aria-valuenow", percent.toFixed(0));
  }, {
    threshold: 0.5 // rinda skaitās redzēta, ja vismaz puse ir redzama
  });

  lines.forEach(line => observer.observe(line));
});
</script>
</body>
</html>
